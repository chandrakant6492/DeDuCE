# Deforestation Driver and Carbon Emission (DeDuCE) model
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13624636.svg)](https://doi.org/10.5281/zenodo.13624636)
![version](https://img.shields.io/badge/version-1.0.1-green)

## Table of Contents
  - [Overview](#overview)
  - [Documentation and data](#Documentation-and-data)
  - [GitHub repository contents](#GitHub-repository-contents)
  - [System Requirement](#system-requirement)
    - [OS requirement](#OS-requirement)
    - [Packages used](#Packages-used)
    - [Processing time](#Processing-time)
  - [Contact](#contact)
    - [Funding](#Funding)
  - [License](#LICENSE)
  - [Change logs](#change-logs)


## Overview
The Deforestation Driver and Carbon Emission (DeDuCE) model amalgamates remotely sensed datasets with extensive agricultural statistics to estimate deforestation attributable to agricultural and forestry activities globally. Developed utilizing Google Earth Engine and Python, DeDuCE comprehensively covers over 9300 unique country-commodity combinations across 179 countries and 184 commodities within the specified period, presenting an unmatched scope and granularity of data. The dataset generated by the model provides country-level estimates of agriculture and forestry-driven deforestation and associated carbon emissions for the period 2001-2022, with sub-national level attribution available for Brazil. 

## Documentation and data
The manuscript detailing the model is archived at EarthArXiV: **_Singh, C., & Persson, U. M. (2024). Global patterns of commodity-driven deforestation and associated carbon emissions_** (_In review_). https://doi.org/10.31223/X5T69B.  
Please cite this preprint when citing this model. 

The input and output/data generated by the model are available at **Zenodo**: https://doi.org/10.5281/zenodo.13624636.   

The insights from this model can also be viewed at: https://www.deforestationfootprint.earth/


## GitHub repository contents
To replicate our analysis, the model needs to be run in the following order (i.e., 1-5). Instruction for running the script and model components is detailed in the respective scripts:
- `1. Deforestation attribution (GEE)-Spatial`: Employs the Earth Engine Python API for spatial deforestation attribution, leveraging Google Earth Engine's extensive data and computational power. Output generated from this step is used as input for statistical deforestation attribution (results generated for this step are archived on Zenodo). More information about [Earth Engine Python API](https://developers.google.com/earth-engine/guides/python_install). 
- `2. Data visualisation (Spatial attribution)`: Analysis and visualisation of spatial attribution estimates.
- `3. Analysing gross crop and grass loss`: Gross crop and grass loss following the methodology by [Li et al. 2018](https://doi.org/10.5194/essd-10-219-2018) Output generated from this step is used as input for statistical deforestation attribution.
- `3.1 Analysing gross crop and grass loss-Subnational`: Gross crop and grass loss for subnational boundaries. Presently analysed for Brazil at municiplaity level. 
- `4. Deforestation attribution (Python)-Statistical`: Statistical deforestation attribution, estimation of carbon emissions and quality assessment. Results generated for this step are archived on Zenodo. 
- `5. Data analysis and visualisation`: All data analyses presented in the study.
- `6. Sensitivity analyses.ipynb`: Sensitivity analyses details provided in Table 1 of the manuscript.
- `7. Trade analyses visualisation.ipynb`: Deforestation embodied in trade analysed using the DeDuCE dataset. 
- `Troubleshooting`: For troubleshooting spatial and statistical deforestation attribution code. It also provides a demo of the DeDuCE model's `Spatial` and `Statistical` deforestation attribution segments.
- `Output`: Expected output from running the DeDuCE model's `Spatial` and `Statistical` deforestation attribution segments.


## System requirement
### OS requirement
The model is not restricted to a specific operating system. Although we conducted our tests on a Linux system, it is fully compatible with Windows and MacOS, provided your computer supports **Python (version 3.10.12)**.

### Packages used
Following are the packages and their respective versions used in this model: 
`geetools: 1.4.0`, `rasterio: 1.4.0`,`matplotlib: 3.9.2`,`pandas: 2.2.3`,`tqdm: 4.66.5`,`numpy: 2.1.1`,`seaborn: 0.13.2`,`geopandas: 1.0.1`,`geemap: 0.34.5`,`plotly: 5.24.1`,`xarray: 2024.9.0`

### Processing time
**Google Earth Engine (GEE)**: GEE imposes usage limits to ensure equitable resource distribution among its users. Running the DeDuCE model's spatial attribution script (`1. Deforestation attribution (GEE)-Spatial`), requires approximately **198 hours** for a standard user privilege account for a single cycle of global spatial attribution.  

**Python**: Executing the statistical attribution script (`4. Deforestation attribution (Python)-Statistical`) on a Linux server configured for `multiprocessing` — allowing the task to be distributed across multiple CPUs — the processing time is about **3 hours** for it to complete a single cycle. The Linux server is equipped with Intel(R) Xeon(R) CPU E5-2650 v4 @ 2.20GHz, featuring 48 CPUs and 252 GB RAM.   

However, when the same Python code is run on a personal computer with a 12th Gen Intel(R) Core(TM) i7-1265U @1.80 GHz processor and 32 GB RAM, it takes around **50 hours** for it to complete a single cycle (expected runtime for a single (sub-)national administrative boundary is about 40 seconds).  

## Contact
If you have any questions or need help with the model, you can contact us at:        
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **Chandrakant Singh and U. Martin Persson**   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [Email](mailto:chandrakant.singh@chalmers.se;martin.persson@chalmers.se): chandrakant.singh@chalmers.se and martin.persson@chalmers.se   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Physical Resource Theory, Department of Space, Earth & Environment,   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Chalmers University of Technology, Gothenburg, Sweden

### Funding
We acknowledge the funding support from ÅForsk Foundation (Project name: ReDUCE and grant no.: 22-64) and the Belmont Forum, through FORMAS (Project name: BEDROCK and grant no.: 2022-02563).

## License
This model is licensed under the GNU General Public License v3.0 (GPL-3.0). It allows users to freely use, modify, and distribute software, ensuring that all modified versions remain free and open under the same license terms.   
(see Licence terms at [LICENCE.md](LICENSE))



## Change logs
Future changes to the model will appear here.
| Version | Date    | Description    |
| :---:   | :---: | :---: |
| v1.0.1 | 31-Aug-2024   | Improved BGB calculation, addition of recent MapBiomas collection, removal of Rubber data |
| v1.0.0 | 26-Feb-2024   | Initial code archived |
